version: '{build}-{branch}'
image: Visual Studio 2017

init:
  - ps: mkdir C:\Users\appveyor\.vagrant.d | Out-Null
    # Disable chocolateyÂ´s verbose download output
  - choco feature disable --name showDownloadProgress
  - choco install virtualbox --yes
    # How did the VirtualBox installation go?
  - VBoxManage --version
  - choco install vagrant --yes
    # Vagrant correctly installed?
  - vagrant --version

install:
  - ssh -V
  - ipconfig /all

build_script:
  - ps: Test-NetConnection google.com -Port 80
  - vagrant up
  - vagrant ssh -c "echo 'hello world!'"
  #|| ssh vagrant@127.0.0.1 -p 2222 -i .vagrant\machines\default\virtualbox\private_key -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -vvv -C "pwd"
  #- vagrant ssh -c "uname -a"

test: off
#test_script:
#  - ansible-playbook playbook.yml -i hosts --syntax-check